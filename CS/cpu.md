## 1. CPU 내부구조
### 1. 제어장치
- 역할: 명령어 디코딩(Instruction Decoding), 제어 신호(Control Signal) 생성.
- 기능: 메모리에서 명령어를 가져와(fetch), 해석(decode)하고, 다른 컴포넌트(ALU, 레지스터, 메모리)에 신호를 보냄.
### 2. 산술 논리장치
- 역할: 연산 처리.
- 기능: 덧셈, 뺄셈 같은 산술 연산과, AND, OR 같은 논리 연산을 수행.

### 3. 레지스터
- 역할: 초고속 임시 저장소.
- 특징: CPU 내부에 위치하며, 접근 속도가 가장 빠름 (L1 캐시보다도 빠름).
### 4. 캐시
- 역할: 메인 메모리보다 빠른 접근을 위한 중간 버퍼.
- 구조: L1, L2, L3 레벨로 나뉘며, CPU 코어 내부/외부에 존재.

## 2. 상태플래그
- CPU 내부의 플래그 레지스터 또는 프로그램 상태 워드(PSW, Program Status Word)에 존재
- 역할: ALU가 산술 또는 논리 연산을 수행한 후, 그 결과가 어떤 상태인지 나타내는 비트값들
- 플래그 종류

| 이름            | 설명                    |
| ---------------------- | ----------------------------------------------- |
| ZF (Zero Flag)    | 연산 결과가 0이면 1로 설정됨 → 예: `CMP A, B`에서 A==B이면 ZF=1 |
| CF (Carry Flag)    | 덧셈에서 자리올림 발생 시 1, 뺄셈에서 자리내림 발생 시 1    |
| OF (Overflow Flag) | 부호 있는 연산에서 오버플로우가 발생하면 1  |
| SF (Sign Flag)     | 결과가 음수면 1, 양수면 0 (MSB가 1이면 음수)           |
| PF (Parity Flag)   | 결과의 비트 수가 짝수면 1 (패리티 검사용)             |


## 3. CPU의 성능 향상을 위한 기술
### 1. 멀티코어(Multi-Core) 🔍
- CPU 칩 안에 여러 개의 실행 유닛(코어)를 넣은 구조. 각 코어는 독립적인 명령어 실행이 가능.
- 명령어 수준 병렬성(ILP)이 아닌 쓰레드 수준 병렬성(TLP) 확보
- 하나의 작업을 병렬로 쪼갤 수 있는 구조에서 성능 극대화
- 체크
    - Core: 명령어를 fetch-decode-execute 할 수 있는 독립된 처리 유닛
    - Shared L3 Cache: 여러 코어가 공유하는 큰 캐시 영역
    - 병렬 처리(Parallel Processing): 각 코어가 서로 다른 쓰레드를 동시에 실행 가능

### 2. 파이프라인 🔍
- 하나의 명령어를 여러 단계로 나눠서, 각 단계를 동시에 처리하는 방식.
- 하나의 명령어를 끝낼 때까지 기다리지 않고, 다음 명령어를 바로 시작하여 처리량(Throughput) 증가
- 파이프라인 해저드(Hazard) 발생 가능 → 데이터 충돌, 제어 흐름 분기 등의 문제
- 단계 예시 (5-stage RISC)
    - IF (Instruction Fetch) → 명령어를 메모리에서 가져옴
    - ID (Instruction Decode) → 명령어를 해석해서 무엇을 할지 판단
    - EX (Execute) → 계산하거나 주소를 계산
    - MEM (Memory Access) → 메모리에 접근해서 읽거나 씀
    - WB (Write Back) → 연산 결과를 레지스터에 저장

### 3. 하이퍼스레딩(Hyper-Threading) 🔍
- 하나의 물리 코어에 두 개의 논리적 실행 흐름(쓰레드)를 태워서, 리소스를 최대한 활용하려는 기술
- 하나의 코어가 실제로는 1개의 ALU, FPU, 캐시만 갖고 있지만, 두 개의 명령어 디코더와 쓰레드 상태를 유지하면서 마치 두 코어처럼 행동
- 단, 리소스를 공유하므로 성능은 2배가 아니라 1.3~1.5배 정도


## 4. 명령어 처리 CPU내부구조
| 구성 요소            | 역할 요약                      |
| ----------------------------------- | --------------------------------- |
| 제어장치 (Control Unit)        | 명령어를 해석하고 CPU 내부 구성요소를 제어함        |
| 명령어 해석기 (Instruction Decoder)     | 명령어를 분석하여 어떤 연산인지 판단하고 제어 신호로 변환함 |
| 명령어 레지스터 (Instruction Register, IR) | 현재 실행 중인 명령어를 임시로 저장함  |
| 프로그램 계수기 (Program Counter, PC)  | 다음에 실행할 명령어의 메모리 주소를 저장함 |
| 주소 레지스터 (Address Register)  | 메모리 접근 시 사용할 주소를 저장함 |
| 데이터 레지스터 (Data Register) | 메모리에서 읽거나 쓸 데이터를 임시로 저장함 (예: MDR) |
| 누산기 (Accumulator)  | 연산 결과를 일시적으로 저장하는 특수한 레지스터    |
| 산술 논리 장치 (ALU)  | 덧셈, 뺄셈, 논리 연산 등 실제 계산을 수행함   |



## 5. 처리과정
### 1. 명령어 가져오기 (Fetch)
- 프로그램 계수기 (PC) → 다음 명령어의 주소를 가리킴
- 주소 레지스터에 PC 값을 전달
- 해당 주소에서 명령어를 읽어 데이터 레지스터에 임시 저장
- 명령어 레지스터 (IR)에 명령어를 최종 저장
- PC는 다음 명령어 주소로 증가

### 2. 명령어 해석하기 (Decode)
- 명령어 해석기 (Instruction Decoder)가 IR의 명령어를 분석
- 어떤 연산인지 해석하고
- 제어장치 (Control Unit)가 필요한 제어 신호 생성 (예: 연산 종류, 레지스터 선택 등)

### 3. 명령어 실행하기 (Execute)
- 제어장치 신호에 따라
- 레지스터에서 값 가져와서
- 산술 논리 장치 (ALU)가 계산 수행
- 결과는 누산기 (Accumulator)에 저장
- 필요 시 메모리로 결과 전송